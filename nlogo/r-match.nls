; __includes ["make-sr-compatible.nls"]
; extensions [sr]

; Note: Ensure `sr:setup` is called in the `setup` procedure.

to-report r-match [#x #y]
  set #x make-sr-compatible #x
  set #y make-sr-compatible #y

  let out sr:runresult (word "match(" #x ", " #y ")")

  (ifelse
    (is-number? out) [
      report out - 1
    ] (is-list? out) [
      report sr:runresult (word (list-to-c out false) " - 1")
    ] [
      report out
    ]
  )
end
